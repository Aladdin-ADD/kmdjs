(function(n){function l(n,t,u){var f=i.createElement("script"),s;u&&(s=isFunction(u)?u(n):u,s&&(f.charset=s)),a(f,t,n),f.async=!0,f.src=n,o=f,e?r.insertBefore(f,e):r.appendChild(f),o=null}function a(n,t,i){function u(i){n.onload=n.onerror=n.onreadystatechange=null,c.debug||r.removeChild(n),n=null,t(i)}var f="onload"in n;f?(n.onload=u,n.onerror=function(){throw"bad request!__"+i+"  404 (Not Found) ";}):n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&u()}}function v(n,t){var r,i;if(n.lastIndexOf)return n.lastIndexOf(t);for(r=t.length,i=n.length-1-r;i>-1;i--)if(t===n.substr(i,r))return i;return-1}var h="KmdGame",i=document,c={},r=i.head||i.getElementsByTagName("head")[0]||i.documentElement,e=r.getElementsByTagName("base")[0],o,u={},t;u.get=function(n,i){var f,e,o,u,r,s;for(typeof n=="string"&&(n=[n]),r=0,u=n.length;r<u;r++)v(n[r],".")==-1&&(n[r]=h+"."+n[r]);for(f=!0,e=[],r=0,u=n.length;r<u;r++)t.modules[n[r]]?e.push(t.modules[n[r]]):f=!1;if(f)i.apply(null,e);else for(o=0,u=n.length,r=0;r<u;r++)s=[],l(n[r]+".js",function(){if(o++,o==u){for(var r=0;r<u;r++)t.modules[n[r]]&&s.push(t.modules[n[r]]);i.apply(null,s)}})},u.exec=function(n){for(var u,o,s,r=0,f=n.length;r<f;r++){var i=n[r],e=[],h=new Function(i.a,i.b);for(u=0,o=i.d.length;u<o;u++)e.push(t.modules[i.d[u]]);s=h.apply(null,e),t.modules[i.c]=s}},n.kmdjs=u;var f=!1,y=/xyz/.test(function(){xyz})?/_super/:/.*/,s=function(){};s.extend=function(n){function i(){!f&&this.init&&this.init.apply(this,arguments)}var e=this.prototype,u,r,t;f=!0,u=new this,f=!1;for(t in n)t!="statics"&&(u[t]=typeof n[t]=="function"&&typeof e[t]=="function"&&y.test(n[t])?function(n,t){return function(){var r=this._super,i;return this._super=e[n],i=t.apply(this,arguments),this._super=r,i}}(t,n[t]):n[t]);for(r in this)this.hasOwnProperty(r)&&r!="extend"&&(i[r]=this[r]);if(n.statics)for(t in n.statics)t=="init"?n.statics[t].call(i):i[t]=n.statics[t];return i.prototype=u,i.prototype.constructor=i,i.extend=arguments.callee,i},n.__class=s,t={},t.modules={},n.__modules=t.modules,t.all=[{"a":[],"b":"var t=__class.extend({init:function(t,i,n,e){this.x=t,this.y=i,this.r=n,this.ctx=e},render:function(){this.ctx.fillStyle=\"Black\",this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},tick:function(){this.render()}});return t","c":"KmdGame.Ball","d":[]},{"a":[],"b":"var t=__class.extend({init:function(t){this.ctx=t,this.value=1;var i=this;setInterval(function(){i.value++},1e3)},render:function(){this.ctx.fillStyle=\"Black\",this.ctx.fillText(this.value,180,20),this.ctx.fill()},tick:function(){this.render()}});return t","c":"KmdGame.Timer","d":[]},{"a":[],"b":"var t=__class.extend({statics:{randomColor:function(){for(var t=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],i=\"#\",n=0;6>n;n++)i+=t[Math.floor(Math.random()*t.length)];return i},each:function(t,i){for(var n=t.length-1;n>-1;n--){i(t[n])}},random:function(t,i){return t+Math.floor(Math.random()*(i-t+1))}}});return t","c":"KmdGame.Util","d":[]},{"a":["Util"],"b":"var t=__class.extend({init:function(t,i,n,s){this.x=t,this.y=i,this.r=n,this.vx=Util.random(-4,4),this.vy=Util.random(-4,4),this.ctx=s,this.color=Util.randomColor()},render:function(){this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},tick:function(){this.x+=this.vx,this.y+=this.vy,(this.x<this.r||this.x+this.r>this.ctx.canvas.width)&&(this.vx*=-1),(this.y<this.r||this.y+this.r>this.ctx.canvas.height)&&(this.vy*=-1),this.render()}});return t","c":"KmdGame.SmallBall","d":["KmdGame.Util"]},{"a":[],"b":"var t=__class.extend({init:function(t,i){this.x=t||0,this.y=i||0},distanceToSquared:function(t){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n}});return t","c":"KmdGame.Vector2","d":[]},{"a":["Ball","Timer","SmallBall","Util","Vector2"],"b":"var t=__class.extend({statics:{initialize:function(){this.canvas=document.querySelector(\"canvas\"),this.width=this.canvas.width,this.height=this.canvas.height,this.ctx=this.canvas.getContext(\"2d\"),this.btn=document.querySelector(\"#startBtn\"),this.msgSpan=document.querySelector(\"#msg\"),this.myBall=new Ball(100,100,5,this.ctx),this.clientRect=this.canvas.getBoundingClientRect(),this.smallBalls=[],this.timer=new Timer(this.ctx),this.gameOver=!0,this.initEvent(),kmdjs.get(\"KmdGame.RAF\",function(){t.loop=requestInterval(function(){t.tick()},15),requestInterval(function(){t.myBall.r+=5},5e3)})},createBalls:function(){for(var t=0;10>t;t++)this.smallBalls.push(new SmallBall(Util.random(0,this.width),Util.random(0,this.height),3,this.ctx))},initEvent:function(){this.canvas.addEventListener(\"mousemove\",function(i){t.myBall.x=i.clientX-t.clientRect.left,t.myBall.y=i.clientY-t.clientRect.top},!1),this.btn.addEventListener(\"click\",function(){t.start()},!1)},start:function(){this.reset(),this.gameOver=!1,this.createBalls()},tick:function(){this.gameOver||(this.ctx.clearRect(0,0,this.width,this.height),this.myBall.tick(),Util.each(this.smallBalls,function(t){t.tick()}),this.timer.tick(),this.checkCollision())},checkCollision:function(){var i=new Vector2(this.myBall.x,this.myBall.y);Util.each(this.smallBalls,function(e){i.distanceToSquared(new Vector2(e.x,e.y))<Math.pow(t.myBall.r+e.r,2)&&(t.msgSpan.innerHTML=\"你坚持了\"+t.timer.value+\"秒\",t.gameOver=!0)})},reset:function(){this.msgSpan.innerHTML=\"\",this.smallBalls.length=0,this.myBall.r=5,this.timer.value=0}}});return t","c":"KmdGame.Game","d":["KmdGame.Ball","KmdGame.Timer","KmdGame.SmallBall","KmdGame.Util","KmdGame.Vector2"]},{"a":["Game"],"b":"var n=__class.extend({init:function(){Game.initialize()}});return n","c":"KmdGame.Main","d":["KmdGame.Game"]}],u.exec(t.all),new t.modules["KmdGame.Main"]})(this)