(function (n) { function l(n, t, u) { var f = i.createElement("script"), s; u && (s = isFunction(u) ? u(n) : u, s && (f.charset = s)), a(f, t, n), f.async = !0, f.src = n, o = f, e ? r.insertBefore(f, e) : r.appendChild(f), o = null } function a(n, t, i) { function u(i) { n.onload = n.onerror = n.onreadystatechange = null, c.debug || r.removeChild(n), n = null, t(i) } var f = "onload" in n; f ? (n.onload = u, n.onerror = function () { throw "bad request!__" + i + "  404 (Not Found) "; }) : n.onreadystatechange = function () { /loaded|complete/.test(n.readyState) && u() } } function v(n, t) { var r, i; if (n.lastIndexOf) return n.lastIndexOf(t); for (r = t.length, i = n.length - 1 - r; i > -1; i--) if (t === n.substr(i, r)) return i; return -1 } var h = "HelloKanvas", i = document, c = {}, r = i.head || i.getElementsByTagName("head")[0] || i.documentElement, e = r.getElementsByTagName("base")[0], o, u = {}, t; u.get = function (n, i) { var f, e, o, u, r, s; for (typeof n == "string" && (n = [n]), r = 0, u = n.length; r < u; r++) v(n[r], ".") == -1 && (n[r] = h + "." + n[r]); for (f = !0, e = [], r = 0, u = n.length; r < u; r++) t.modules[n[r]] ? e.push(t.modules[n[r]]) : f = !1; if (f) i.apply(null, e); else for (o = 0, u = n.length, r = 0; r < u; r++) s = [], l(n[r] + ".js", function () { if (o++, o == u) { for (var r = 0; r < u; r++) t.modules[n[r]] && s.push(t.modules[n[r]]); i.apply(null, s) } }) }, u.exec = function (n) { for (var u, o, s, r = 0, f = n.length; r < f; r++) { var i = n[r], e = [], h = new Function(i.a, i.b); for (u = 0, o = i.d.length; u < o; u++) e.push(t.modules[i.d[u]]); s = h.apply(null, e), t.modules[i.c] = s } }, n.kmdjs = u; var f = !1, y = /xyz/.test(function () { xyz }) ? /\b_super\b/ : /.*/, s = function () { }; s.extend = function (n) { function i() { !f && this.ctor && this.ctor.apply(this, arguments) } var e = this.prototype, u, r, t; f = !0, u = new this, f = !1; for (t in n) t != "statics" && (u[t] = typeof n[t] == "function" && typeof e[t] == "function" && y.test(n[t]) ? function (n, t) { return function () { var r = this._super, i; return this._super = e[n], i = t.apply(this, arguments), this._super = r, i } }(t, n[t]) : n[t]); for (r in this) this.hasOwnProperty(r) && r != "extend" && (i[r] = this[r]); if (n.statics) for (t in n.statics) t == "ctor" ? n.statics[t].call(i) : i[t] = n.statics[t]; return i.prototype = u, i.prototype.constructor = i, i.extend = arguments.callee, i }, n.__class = s, t = {}, t.modules = {}, n.__modules = t.modules, t.all = [{ "a": [], "b": "var t=__class.extend({statics:{DEG_TO_RAD:.017453292519943295},ctor:function(t,i,s,n,e,h){return this.a=null==t?1:t,this.b=i||0,this.c=s||0,this.d=null==n?1:n,this.tx=e||0,this.ty=h||0,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},appendTransform:function(i,s,n,e,h,a,r,o,c){if(h%360)var u=h*t.DEG_TO_RAD,d=Math.cos(u),l=Math.sin(u);else d=1,l=0;return a||r?(a*=t.DEG_TO_RAD,r*=t.DEG_TO_RAD,this.append(Math.cos(r),Math.sin(r),-Math.sin(a),Math.cos(a),i,s),this.append(d*n,l*n,-l*e,d*e,0,0)):this.append(d*n,l*n,-l*e,d*e,i,s),(o||c)&&(this.tx-=o*this.a+c*this.c,this.ty-=o*this.b+c*this.d),this},append:function(t,i,s,n,e,h){var a=this.a,r=this.b,o=this.c,c=this.d;return this.a=t*a+i*o,this.b=t*r+i*c,this.c=s*a+n*o,this.d=s*r+n*c,this.tx=e*a+h*o+this.tx,this.ty=e*r+h*c+this.ty,this}});return t", "c": "Kanvas.Matrix2D", "d": [] }, { "a": ["Matrix2D"], "b": "var t=__class.extend({ctor:function(){this.scaleX=this.scaleY=1,this.x=this.y=this.rotation=this.regX=this.regY=this.skewX=this.skewY=0,this._matrix=new Matrix2D},updateContext:function(t){var i=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);t.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)}});return t", "c": "Kanvas.DisplayObject", "d": ["Kanvas.Matrix2D"] }, { "a": ["DisplayObject"], "b": "var t=__modules[\"Kanvas.DisplayObject\"].extend({ctor:function(){this.children=[]},draw:function(t){for(var n=0,e=this.children.length;e>n;n++){var i=this.children[n];t.save(),i.updateContext(t),i.draw(t),t.restore()}}});return t", "c": "Kanvas.Container", "d": ["Kanvas.DisplayObject"] }, { "a": ["Container"], "b": "var t=__modules[\"Kanvas.Container\"].extend({ctor:function(t){this._super(),this.canvas=\"string\"==typeof t?document.querySelector(t):t,this.ctx=this.canvas.getContext(\"2d\"),this.width=this.canvas.width,this.height=this.canvas.height},add:function(t){this.children.push(t)},update:function(){this.ctx.clearRect(0,0,this.width,this.height),this.draw(this.ctx)}});return t", "c": "Kanvas.Stage", "d": ["Kanvas.Container"] }, { "a": ["DisplayObject"], "b": "var t=__modules[\"Kanvas.DisplayObject\"].extend({ctor:function(t,n,e){this._super(),this.text=t,this.font=n,this.color=e,this.textAlign=\"left\",this.textBaseline=\"top\"},draw:function(t){t.fillStyle=this.color,t.font=this.font,t.textAlign=this.textAlign||\"left\",t.textBaseline=this.textBaseline||\"top\",t.fillText(this.text,0,0)}});return t", "c": "Kanvas.Txt", "d": ["Kanvas.DisplayObject"] }, { "a": ["Stage", "Txt"], "b": "var a=__class.extend({ctor:function(){var a=new Stage(\"#ourCanvas\"),n=new Txt(\"Hello Kanvas!\",\"bold 36px Arial\",\"green\");n.x=140,n.y=100,n.regX=100,n.regY=20,n.skewX=30,n.skewY=-30,n.rotation=20,a.add(n),a.update();var e=new Txt(\"KMD:Kill AMD and CMD!\",\"bold 26px Arial\",\"red\");e.y=400,a.add(e),setInterval(function(){n.rotation++,a.update()},15)}});return a", "c": "HelloKanvas.Main", "d": ["Kanvas.Stage", "Kanvas.Txt"] }], u.exec(t.all), new t.modules["HelloKanvas.Main"] })(this)